---
title: Linux学习笔记 (一)：目录、文件、权限、账户
date: 2017-09-23 12:11:32
categories:
- Linux
tags:
- Linux
- chmod
- 文件权限控制
- useradd
- usermod
---


### 1.概念：
Linux是一套免费使用和自由传播的类Unix操作系统，是一个基于POSIX和UNIX的多用户、多任务、支持多线程和多CPU的操作系统。

Linux 是进行内核研究、学习 UNIX 或学习编程的绝佳学习平台；Linux 是作为编程平台的绝佳选择。

您习惯 Linux 的工作方式后，您将具有更大的工具集来控制和维护您的环境。Linux 的强大之处在于它的稳定性和灵活性。一旦您领悟了 Linux 的思想，您将可以完成更多的任务，使更多的任务自动化，更多地以远程方式完成任务。

Linux 相对于 Windows 的许多变化都是有益的。空闲的 GUI 的开销被归还给服务。任务可以脚本化并可以自动执行。配置文件基于文本并且人类可读。在大多数情况下不必重新引导系统。实际上，您应该抑制重新引导系统的冲动。

**重新引导是最后的手**
如果您确实重新引导了 Linux 系统，问题很可能得不到解决，而且还会使问题更加恶化。学习并掌握 Linux 服务和运行级别是成功解决问题的关键。学习 Linux 最困难的就是克服重新引导系统的习惯。

**命令区分大小写**
所有的 Linux 命令和选项都区分大小写。例如， -R 与 -r不同，会去做不同的事情。控制台命令几乎都是小写的。
　　　
### 2.系统目录结构

![这里写图片描述](/images/2017092301.png)



 - **/bin：**
 bin是Binary的缩写, 这个目录存放着最经常使用的命令。

 - **/boot：**
  这里存放的是启动Linux时使用的一些核心文件，包括一些连接文件以及镜像文件。

 - **/dev ：**
        dev是Device(设备)的缩写, 该目录下存放的是Linux的外部设备，在Linux中访问设备的方式和访问文件的            方式是相同的。

 - **/etc：**
这个目录用来存放所有的系统管理所需要的配置文件和子目录。

 - **/home：**
用户的主目录，在Linux中，每个用户都有一个自己的目录，一般该目录名是以用户的账号命名的。

 - **/lib：**
这个目录里存放着系统最基本的动态连接共享库，其作用类似于Windows里的DLL文件。几乎所有的应用程序都需要用到这些共享库。 	

 - **/lost+found：** 
 这个目录一般情况下是空的，当系统非法关机后，这里就存放了一些文 件。

 - **/media：**
linux系统会自动识别一些设备，例如U盘、光驱等等，当识别后，linux会把识别的设备挂载到这个目录下。

 - **/mnt：**
系统提供该目录是为了让用户临时挂载别的文件系统的，我们可以将光驱挂载在/mnt/上，然后进入该目录就可以查看光驱里的内容了。

 

 - **/opt：**
这是给主机额外安装软件所摆放的目录。比如你安装一个ORACLE数据库则就可以放到这个目录下。默认是空的。

 - **/proc：**
这个目录是一个虚拟的目录，它是系统内存的映射，我们可以通过直接访问这个目录来获取系统信息。
这个目录的内容不在硬盘上而是在内存里，我们也可以直接修改里面的某些文件，比如可以通过下面的命令来屏蔽主机的ping命令，使别人无法ping你的机器：
echo 1 > /proc/sys/net/ipv4/icmp_echo_ignore_all

 - **/root：**
该目录为系统管理员，也称作超级权限者的用户主目录。

 - **/sbin：**
s就是Super User的意思，这里存放的是系统管理员使用的系统管理程序。

 - **/selinux：**
 这个目录是Redhat/CentOS所特有的目录，Selinux是一个安全机制，类似于windows的防火墙，但是这套机制比较复杂，这个目录就是存放selinux相关的文件的。

 - **/srv：**
 该目录存放一些服务启动之后需要提取的数据。
 
 - **/sys：**
sysfs文件系统集成了下面3种文件系统的信息：针对进程信息的proc文件系统、针对设备的devfs文件系统以及针对伪终端的devpts文件系统。该文件系统是内核设备树的一个直观反映。当一个内核对象被创建的时候，对应的文件和目录也在内核对象子系统中被创建。

 - **/tmp：**
这个目录是用来存放一些临时文件的。

 - **/usr：**
 这是一个非常重要的目录，用户的很多应用程序和文件都放在这个目录下，类似与windows下的program files目录。

 - **/usr/bin：**
系统用户使用的应用程序。

 - **/usr/sbin：**
超级用户使用的比较高级的管理程序和系统守护程序。

 - **/usr/src：**内核源代码默认的放置目录。

 - **/var：**
这个目录中存放着在不断扩充着的东西，我们习惯将那些经常被修改的目录放在这个目录下。包括各种日志文件。

　　　　　　

### 3.文件权限控制

Linux文件属性有两种设置方法，一种是数字，一种是符号。

Linux文件的基本权限就有九个，分别是owner/group/others三种身份各有自己的read/write/execute权限。文件的权限字符为：『-rwxrwxrwx』， 这九个权限是三个三个一组的！其中，我们可以使用数字来代表各个权限，各权限的分数对照表如下：

```
  r:4            
  w:2
  x:1
```

每种身份(owner/group/others)各自的三个权限(r/w/x)分数是需要累加的，例如当权限为： [-rwxrwx---] 分数则是：

```
   owner = rwx = 4+2+1 = 7
   group = rwx = 4+2+1 = 7
   others= --- = 0+0+0 = 0
```

所以等一下我们设定权限的变更时，该文件的权限数字就是770 , 如下：

 chmod [-R] xyz 文件或目录

如：  `chmod -R 777 .bashrc    chmod 777 .bashrc`

选项与参数：

 - **xyz** ： 就是刚刚提到的数字类型的权限属性，为 rwx 属性数值的相加。  
 - **-R** ：进行递归(recursive)的持续变更，亦即连同次目录下的所有文件都会变更

那如果要将权限变成 -rwxr-xr-- 呢？那么权限的分数就成为 [4+2+1][4+0+1][4+0+0]=754。
　　　
### 4.系统用户账号的管理

添加用户账号就是在系统中创建一个新账号，然后为新账号分配用户号、用户组、主目录和登录Shell等资源。

**1、用 useradd 命令添加新的用户账号**

      

```
     useradd 选项 用户名
```

- -c comment 指定一段注释性描述。    
- -G 用户组，用户组 指定用户所属的附加组。   
- -s Shell文件 指定用户的登录Shell。    
- -u 用户号 指定用户的用户号，如果同时有-o选项，则可以重复使用其他用户的标识号。

eg:
1) `useradd –d /usr/sam -m sam`

此命令创建了一个用户sam，其中-d和-m选项用来为登录名sam产生一个主目录/usr/sam（/usr为默认的用户主目录所在的父目录）。

2) `useradd -s /bin/sh -g group –G adm,root gem`

此命令新建了一个用户gem，该用户的登录Shell是 /bin/sh，它属于group用户组，同时又属于adm和root用户组，其中group用户组是其主组。这里可能新建组：#groupadd group及groupadd adm
增加用户账号就是在/etc/passwd文件中为新用户增加一条记录，同时更新其他系统文件如/etc/shadow, /etc/group等。

**2、用 usermod 命令修改账号**

修可根据实际情况修改用户号、主目录、用户组、登录Shell等。

修改已有用户的信息使用usermod命令

            

```
     usermod 选项 用户名
```

常用的选项包括-c, -d, -m, -g, -G, -s, -u以及-o等，这些选项的意义与useradd命令中的选项一样，可以为用户指定新的资源值。

eg: 
```
usermod -s /bin/ksh -d /home/z –g developer sam
```
此命令将用户sam的登录Shell修改为ksh，主目录改为/home/z，用户组改为developer。



**3、用 userdel  命令删除帐号**

删除用户账号就是要将/etc/passwd等系统文件中的该用户记录删除，必要时还删除用户的主目录。常用的选项是-r，它的作用是把用户的主目录一起删除。

删除一个已有的用户账号使用userdel命令，其格式如下：   

```
     userdel 选项 用户名
```

eg:

```
 userdel sam
```

此命令删除用户sam在系统文件中（主要是/etc/passwd, /etc/shadow, /etc/group等）的记录，同时删除用户的主目录。


4、用 passwd 命令管理用户口令

用户管理的一项重要内容是用户口令的管理。用户账号刚创建时没有口令，但是被系统锁定，无法使用，必须为其指定口令后才可以使用，即使是指定空口令。超级用户可以为自己和其他用户指定口令，普通用户只能用它修改自己的口令。命令的格式为：
     
     

```
      passwd 选项 用户名
```

可使用的选项：

 - -l 锁定口令，即禁用账号。
 - -u 口令解锁。  
 - -d 使账号无口令。
 - -f 强迫用户下次登录时修改口令。

如果默认用户名，则修改当前用户的口令。

eg:
1）当前普通用户修改该用户自己的口令：
$ passwd 
Old password:****** 
New password:******* 
Re-enter new password:*******

2）超级用户，可以用下列形式指定任何用户的口令：
 passwd sam 
New password:******* 
Re-enter new password:*******



3）删除口令

```
 passwd -d sam
```

注：系删除口令后，下次登录统就不再询问口令。

4）锁定某一用户

```
 passwd -l sam
```

注：被锁定的用户无法登录
